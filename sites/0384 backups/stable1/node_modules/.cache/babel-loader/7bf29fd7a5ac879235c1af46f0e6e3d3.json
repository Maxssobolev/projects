{"ast":null,"code":"var _jsxFileName = \"/root/0384full/src/components/subhomework.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Collapse } from 'react-bootstrap';\nimport { Markup } from 'interweave';\nimport { Link } from 'react-router-dom';\nimport moment from 'moment';\nimport 'moment/locale/ru';\nimport fire from \"../assets/img/fire.svg\";\nimport fileImg from \"../assets/img/file.svg\";\nexport default class Subhomework extends React.Component {\n  constructor(props) {\n    super(props);\n    this.subject_id = this.props.subject_id;\n    this.state = {\n      hw: [],\n      last: ''\n    };\n  }\n\n  componentDidMount() {\n    const apiUrl = `/api/subjecthomework/?id=${this.subject_id}`;\n    axios.get(apiUrl).then(resp => {\n      if (resp.data.length > 0) {\n        this.setState({\n          hw: resp.data,\n          last: resp.data[0].date\n        });\n      }\n    });\n  }\n\n  render() {\n    if (this.state.hw) {\n      return /*#__PURE__*/React.createElement(Tab, {\n        eventKey: \"homework\",\n        title: \"\\u0414\\u043E\\u043C\\u0430\\u0448\\u043D\\u0435\\u0435 \\u0437\\u0430\\u0434\\u0430\\u043D\\u0438\\u0435\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"page-subdirect__hwBlock\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }\n      }, this.state.hw.map((res, index) => {\n        let deadline = '';\n        let wholeRopeWidth = '';\n        let progress = '';\n        let fromStartToNow = '';\n        let publicDate = moment(res.date);\n        let pubicDate_startPoint = moment(res.date);\n        let color = 'rgb(125 199 125)';\n        let leftTime = '';\n\n        if (res.deadline !== '0000-00-00') {\n          deadline = moment(res.deadline);\n          wholeRopeWidth = deadline.diff(publicDate, 'hours');\n          fromStartToNow = moment().diff(pubicDate_startPoint, 'hours');\n          progress = fromStartToNow / wholeRopeWidth * 100;\n          leftTime = wholeRopeWidth - fromStartToNow;\n\n          if (100 - progress <= 65) {\n            color = '#d8e061';\n          }\n\n          if (100 - progress <= 35) {\n            color = '#ff958a';\n          }\n        }\n\n        const regex = /\\b(?:(?:ht|f)tp(?:s?)\\:\\/\\/|~\\/|\\/)?(?:\\w+:\\w+@)?((?:(?:[-\\w\\d{1-3}]+\\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\\.uk|ac\\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2}))|((\\b25[0-5]\\b|\\b[2][0-4][0-9]\\b|\\b[0-1]?[0-9]?[0-9]\\b)(\\.(\\b25[0-5]\\b|\\b[2][0-4][0-9]\\b|\\b[0-1]?[0-9]?[0-9]\\b)){3}))(?::[\\d]{1,5})?(?:(?:(?:\\/(?:[-\\w~!$+|.,=]|%[a-f\\d]{2})+)+|\\/)+|\\?|#)?(?:(?:\\?(?:[-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?(?:[-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)(?:&(?:[-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?(?:[-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)*)*(?:#(?:[-\\w~!$ |\\/.,*:;=]|%[a-f\\d]{2})*)?\\b/gi;\n        const replacedContent = res.content.replace(regex, match => {\n          return `\n                    <img src=${fileImg} width='40' />\n                  `;\n        });\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 17\n          }\n        }, deadline && moment().isBefore(deadline) && /*#__PURE__*/React.createElement(\"div\", {\n          title: `до сдачи осталось ${Math.floor(leftTime / 24)}д ${leftTime - 24 * Math.floor(leftTime / 24)}ч`,\n          style: {\n            marginTop: '25px',\n            width: progress ? 100 - progress + '%' : 0,\n            background: color,\n            height: '5px',\n            position: 'relative'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: fire,\n          width: \"25\",\n          style: {\n            opacity: 0.8,\n            position: 'absolute',\n            right: '-6px',\n            top: '-18px'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 23\n          }\n        })), /*#__PURE__*/React.createElement(Link, {\n          to: {\n            pathname: `/view`,\n            state: {\n              res\n            }\n          },\n          className: \"info-block\",\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-block__title\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }\n        }, res.title), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-block__content\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Markup, {\n          content: res.content.length > 300 ? res.content.substring(0, 300) + '...' : res.content,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }\n        })), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-block__date\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 21\n          }\n        }, publicDate.locale('ru').format('lll')), deadline && moment().isBefore(deadline) && /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-block__date info-block__date_deadline\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 23\n          }\n        }, \"\\u0441\\u0434\\u0430\\u0442\\u044C \\u0434\\u043E \", deadline.locale('ru').format('lll')), deadline && moment().isAfter(deadline) && /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-block__date info-block__date_deadline\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 23\n          }\n        }, \"\\u0434\\u0435\\u0434\\u043B\\u0430\\u0439\\u043D \\u0431\\u044B\\u043B \", deadline.locale('ru').format('lll'))));\n      })));\n    }\n  }\n\n}","map":{"version":3,"sources":["/root/0384full/src/components/subhomework.js"],"names":["React","axios","Collapse","Markup","Link","moment","Subhomework","Component","constructor","props","subject_id","state","hw","last","componentDidMount","apiUrl","get","then","resp","data","length","setState","date","render","map","res","index","deadline","wholeRopeWidth","progress","fromStartToNow","publicDate","pubicDate_startPoint","color","leftTime","diff","regex","replacedContent","content","replace","match","fileImg","isBefore","Math","floor","marginTop","width","background","height","position","fire","opacity","right","top","pathname","title","substring","locale","format","isAfter"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Collapse } from 'react-bootstrap';\r\nimport { Markup } from 'interweave';\r\nimport { Link } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport 'moment/locale/ru';\r\nimport fire from '../assets/img/fire.svg';\r\nimport fileImg from '../assets/img/file.svg';\r\n\r\nexport default class Subhomework extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.subject_id = this.props.subject_id;\r\n\r\n    this.state = {\r\n      hw: [],\r\n      last: '',\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const apiUrl = `/api/subjecthomework/?id=${this.subject_id}`;\r\n    axios.get(apiUrl).then((resp) => {\r\n      if (resp.data.length > 0) {\r\n        this.setState({\r\n          hw: resp.data,\r\n          last: resp.data[0].date,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hw) {\r\n      return (\r\n        <Tab eventKey=\"homework\" title=\"Домашнее задание\">\r\n          <div className=\"page-subdirect__hwBlock\">\r\n            {this.state.hw.map((res, index) => {\r\n              let deadline = '';\r\n              let wholeRopeWidth = '';\r\n              let progress = '';\r\n              let fromStartToNow = '';\r\n              let publicDate = moment(res.date);\r\n              let pubicDate_startPoint = moment(res.date);\r\n              let color = 'rgb(125 199 125)';\r\n              let leftTime = '';\r\n              if (res.deadline !== '0000-00-00') {\r\n                deadline = moment(res.deadline);\r\n                wholeRopeWidth = deadline.diff(publicDate, 'hours');\r\n                fromStartToNow = moment().diff(pubicDate_startPoint, 'hours');\r\n                progress = (fromStartToNow / wholeRopeWidth) * 100;\r\n                leftTime = wholeRopeWidth - fromStartToNow;\r\n                if (100 - progress <= 65) {\r\n                  color = '#d8e061';\r\n                }\r\n                if (100 - progress <= 35) {\r\n                  color = '#ff958a';\r\n                }\r\n              }\r\n\r\n              const regex = /\\b(?:(?:ht|f)tp(?:s?)\\:\\/\\/|~\\/|\\/)?(?:\\w+:\\w+@)?((?:(?:[-\\w\\d{1-3}]+\\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\\.uk|ac\\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2}))|((\\b25[0-5]\\b|\\b[2][0-4][0-9]\\b|\\b[0-1]?[0-9]?[0-9]\\b)(\\.(\\b25[0-5]\\b|\\b[2][0-4][0-9]\\b|\\b[0-1]?[0-9]?[0-9]\\b)){3}))(?::[\\d]{1,5})?(?:(?:(?:\\/(?:[-\\w~!$+|.,=]|%[a-f\\d]{2})+)+|\\/)+|\\?|#)?(?:(?:\\?(?:[-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?(?:[-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)(?:&(?:[-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?(?:[-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)*)*(?:#(?:[-\\w~!$ |\\/.,*:;=]|%[a-f\\d]{2})*)?\\b/gi;\r\n\r\n              const replacedContent = res.content.replace(regex, (match) => {\r\n                return `\r\n                    <img src=${fileImg} width='40' />\r\n                  `;\r\n              });\r\n              return (\r\n                <div key={index}>\r\n                  {deadline && moment().isBefore(deadline) && (\r\n                    <div\r\n                      title={`до сдачи осталось ${Math.floor(leftTime / 24)}д ${\r\n                        leftTime - 24 * Math.floor(leftTime / 24)\r\n                      }ч`}\r\n                      style={{\r\n                        marginTop: '25px',\r\n                        width: progress ? 100 - progress + '%' : 0,\r\n                        background: color,\r\n                        height: '5px',\r\n                        position: 'relative',\r\n                      }}>\r\n                      <img\r\n                        src={fire}\r\n                        width=\"25\"\r\n                        style={{\r\n                          opacity: 0.8,\r\n                          position: 'absolute',\r\n                          right: '-6px',\r\n                          top: '-18px',\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                  <Link\r\n                    to={{\r\n                      pathname: `/view`,\r\n                      state: { res },\r\n                    }}\r\n                    className=\"info-block\"\r\n                    key={index}>\r\n                    <span className=\"info-block__title\">{res.title}</span>\r\n                    <span className=\"info-block__content\">\r\n                      {\r\n                        <Markup\r\n                          content={\r\n                            res.content.length > 300\r\n                              ? res.content.substring(0, 300) + '...'\r\n                              : res.content\r\n                          }\r\n                        />\r\n                      }\r\n                    </span>\r\n                    <span className=\"info-block__date\">\r\n                      {publicDate.locale('ru').format('lll')}\r\n                    </span>\r\n                    {deadline && moment().isBefore(deadline) && (\r\n                      <span className=\"info-block__date info-block__date_deadline\">\r\n                        сдать до {deadline.locale('ru').format('lll')}\r\n                      </span>\r\n                    )}\r\n                    {deadline && moment().isAfter(deadline) && (\r\n                      <span className=\"info-block__date info-block__date_deadline\">\r\n                        дедлайн был {deadline.locale('ru').format('lll')}\r\n                      </span>\r\n                    )}\r\n                  </Link>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </Tab>\r\n      );\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}