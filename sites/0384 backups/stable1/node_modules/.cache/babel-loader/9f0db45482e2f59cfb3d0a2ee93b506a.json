{"ast":null,"code":"import _classCallCheck from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Markup}from'interweave';import{Link}from'react-router-dom';import moment from'moment';import'moment/locale/ru';import rope from'../assets/img/rope.png';import fire from\"../assets/img/fire.svg\";var HW=/*#__PURE__*/function(_React$Component){_inherits(HW,_React$Component);var _super=_createSuper(HW);function HW(props){var _this;_classCallCheck(this,HW);_this=_super.call(this,props);_this.state={hw:[]};return _this;}_createClass(HW,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var apiUrl=\"/api/homework\";axios.get(apiUrl).then(function(resp){if(resp.data.length>0){_this2.setState({hw:resp.data});}});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"page page-homework\"},this.state.hw.map(function(res,index){var deadline='';var wholeRopeWidth='';var progress='';var fromStartToNow='';var publicDate=moment(res.date);var pubicDate_startPoint=moment(res.date);var color='rgb(125 199 125)';var leftTime='';if(res.deadline!=='0000-00-00'){deadline=moment(res.deadline);wholeRopeWidth=deadline.diff(publicDate,'hours');fromStartToNow=moment().diff(pubicDate_startPoint,'hours');progress=fromStartToNow/wholeRopeWidth*100;leftTime=wholeRopeWidth-fromStartToNow;if(100-progress<=65){color='#d8e061';}if(100-progress<=35){color='#ff958a';}}return/*#__PURE__*/React.createElement(\"div\",{key:index},deadline&&moment().isBefore(deadline)&&/*#__PURE__*/React.createElement(\"div\",{title:\"\\u0434\\u043E \\u0441\\u0434\\u0430\\u0447\\u0438 \\u043E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C \".concat(Math.floor(leftTime/24),\"\\u0434 \").concat(leftTime-24*Math.floor(leftTime/24),\"\\u0447\"),style:{marginTop:'25px',width:progress?100-progress+'%':0,background:color,height:'5px',position:'relative'}},/*#__PURE__*/React.createElement(\"img\",{src:fire,width:\"25\",style:{opacity:0.8,position:'absolute',right:'-6px',top:'-18px'}})),/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/view\",state:{res:res}},className:\"info-block\"},/*#__PURE__*/React.createElement(\"span\",{className:\"info-block__title\"},res.title,\" \",/*#__PURE__*/React.createElement(\"span\",null,\"| \",res.subjtitle)),/*#__PURE__*/React.createElement(\"span\",{className:\"info-block__content\"},/*#__PURE__*/React.createElement(Markup,{content:res.content.length>300?res.content.substring(0,300)+'...':res.content})),/*#__PURE__*/React.createElement(\"span\",{className:\"info-block__date\"},publicDate.locale('ru').format('lll')),/*#__PURE__*/React.createElement(\"span\",{className:\"info-block__date info-block__date_deadline\"},\"\\u0441\\u0434\\u0430\\u0442\\u044C \\u0434\\u043E \",deadline.locale('ru').format('lll'))));}));}}]);return HW;}(React.Component);export{HW as default};","map":{"version":3,"sources":["/root/0384full/src/pages/hw.js"],"names":["React","axios","Markup","Link","moment","rope","HW","props","state","hw","apiUrl","get","then","resp","data","length","setState","map","res","index","deadline","wholeRopeWidth","progress","fromStartToNow","publicDate","date","pubicDate_startPoint","color","leftTime","diff","isBefore","Math","floor","marginTop","width","background","height","position","fire","opacity","right","top","pathname","title","subjtitle","content","substring","locale","format","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Markup } from 'interweave';\r\nimport { Link } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport 'moment/locale/ru';\r\nimport rope from '../assets/img/rope.png';\r\nimport fire from '../assets/img/fire.svg';\r\n\r\nexport default class HW extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      hw: [],\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const apiUrl = `/api/homework`;\r\n    axios.get(apiUrl).then((resp) => {\r\n      if (resp.data.length > 0) {\r\n        this.setState({\r\n          hw: resp.data,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"page page-homework\">\r\n        {this.state.hw.map((res, index) => {\r\n          let deadline = '';\r\n          let wholeRopeWidth = '';\r\n          let progress = '';\r\n          let fromStartToNow = '';\r\n          let publicDate = moment(res.date);\r\n          let pubicDate_startPoint = moment(res.date);\r\n          let color = 'rgb(125 199 125)';\r\n          let leftTime = '';\r\n          if (res.deadline !== '0000-00-00') {\r\n            deadline = moment(res.deadline);\r\n            wholeRopeWidth = deadline.diff(publicDate, 'hours');\r\n            fromStartToNow = moment().diff(pubicDate_startPoint, 'hours');\r\n            progress = (fromStartToNow / wholeRopeWidth) * 100;\r\n            leftTime = wholeRopeWidth - fromStartToNow;\r\n            if (100 - progress <= 65) {\r\n              color = '#d8e061';\r\n            }\r\n            if (100 - progress <= 35) {\r\n              color = '#ff958a';\r\n            }\r\n          }\r\n\r\n          return (\r\n            <div key={index}>\r\n              {deadline && moment().isBefore(deadline) && (\r\n                <div\r\n                  title={`до сдачи осталось ${Math.floor(leftTime / 24)}д ${\r\n                    leftTime - 24 * Math.floor(leftTime / 24)\r\n                  }ч`}\r\n                  style={{\r\n                    marginTop: '25px',\r\n                    width: progress ? 100 - progress + '%' : 0,\r\n                    background: color,\r\n                    height: '5px',\r\n                    position: 'relative',\r\n                  }}>\r\n                  <img\r\n                    src={fire}\r\n                    width=\"25\"\r\n                    style={{\r\n                      opacity: 0.8,\r\n                      position: 'absolute',\r\n                      right: '-6px',\r\n                      top: '-18px',\r\n                    }}\r\n                  />\r\n                </div>\r\n              )}\r\n              <Link\r\n                to={{\r\n                  pathname: `/view`,\r\n                  state: { res },\r\n                }}\r\n                className=\"info-block\">\r\n                <span className=\"info-block__title\">\r\n                  {res.title} <span>| {res.subjtitle}</span>\r\n                </span>\r\n\r\n                <span className=\"info-block__content\">\r\n                  {\r\n                    <Markup\r\n                      content={\r\n                        res.content.length > 300\r\n                          ? res.content.substring(0, 300) + '...'\r\n                          : res.content\r\n                      }\r\n                    />\r\n                  }\r\n                </span>\r\n                <span className=\"info-block__date\">{publicDate.locale('ru').format('lll')}</span>\r\n                <span className=\"info-block__date info-block__date_deadline\">\r\n                  сдать до {deadline.locale('ru').format('lll')}\r\n                </span>\r\n              </Link>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}