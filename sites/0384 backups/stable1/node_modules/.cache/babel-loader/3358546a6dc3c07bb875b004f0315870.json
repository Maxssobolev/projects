{"ast":null,"code":"import _regeneratorRuntime from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import moment from'moment';var MainPosts=/*#__PURE__*/function(_React$Component){_inherits(MainPosts,_React$Component);var _super=_createSuper(MainPosts);function MainPosts(props){var _this;_classCallCheck(this,MainPosts);_this=_super.call(this,props);_this.state={value:''};_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(MainPosts,[{key:\"handleInputChange\",value:function handleInputChange(event){var target=event.target;var value=target.value;var name=target.name;this.setState(_defineProperty({},name,value));}},{key:\"handleSubmit\",value:function handleSubmit(event){event.preventDefault();var sended_data={title:this.state.main_title,content:this.state.main_content,author:'Максим',date:moment().format(\"YYYY-MMMM-DDDD HH:mm:ss\")};function postData(){return _postData.apply(this,arguments);}function _postData(){_postData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,response,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_args.length>0&&_args[0]!==undefined?_args[0]:{};_context.next=3;return fetch('/main_post/new',{method:'POST',// или 'PUT'\nbody:JSON.stringify(data),// данные могут быть 'строкой' или {объектом}!\nheaders:{'Content-Type':'application/json'}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:return _context.abrupt(\"return\",_context.sent);case 7:case\"end\":return _context.stop();}}},_callee);}));return _postData.apply(this,arguments);}postData(sended_data);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"main_post_create\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u0417\\u0430\\u043F\\u0438\\u0441\\u0438 \\u043D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u043E\\u0439\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit,method:\"POST\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:this.handleInputChange,name:\"main_title\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/React.createElement(\"textarea\",{id:\"froala-editor\",name:\"main_content\",cols:\"30\",rows:\"10\",onChange:this.handleInputChange,placeholder:\"\\u041A\\u043E\\u043D\\u0442\\u0435\\u043D\\u0442\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})));}}]);return MainPosts;}(React.Component);//\nexport{MainPosts as default};","map":{"version":3,"sources":["/root/0384full/src/components/admin-utils/main_posts.js"],"names":["React","moment","MainPosts","props","state","value","handleInputChange","bind","handleSubmit","event","target","name","setState","preventDefault","sended_data","title","main_title","content","main_content","author","date","format","postData","data","fetch","method","body","JSON","stringify","headers","response","json","Component"],"mappings":"uiCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,C,GAEqBC,CAAAA,S,kHACnB,mBAAYC,KAAZ,CAAmB,2CACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CAAEC,KAAK,CAAE,EAAT,CAAb,CAEA,MAAKC,iBAAL,CAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,+BAAzB,CACA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB,CALiB,aAMlB,C,kFAEiBE,K,CAAO,CACvB,GAAMC,CAAAA,MAAM,CAAGD,KAAK,CAACC,MAArB,CACA,GAAML,CAAAA,KAAK,CAAGK,MAAM,CAACL,KAArB,CACA,GAAMM,CAAAA,IAAI,CAAGD,MAAM,CAACC,IAApB,CAEA,KAAKC,QAAL,oBACGD,IADH,CACUN,KADV,GAGD,C,kDAEYI,K,CAAO,CAClBA,KAAK,CAACI,cAAN,GAEA,GAAMC,CAAAA,WAAW,CAAG,CAClBC,KAAK,CAAE,KAAKX,KAAL,CAAWY,UADA,CAElBC,OAAO,CAAE,KAAKb,KAAL,CAAWc,YAFF,CAGlBC,MAAM,CAAE,QAHU,CAIlBC,IAAI,CAAEnB,MAAM,GAAGoB,MAAT,CAAgB,yBAAhB,CAJY,CAApB,CAHkB,QAUHC,CAAAA,QAVG,kIAUlB,qKAAwBC,IAAxB,+CAA+B,EAA/B,uBACyBC,CAAAA,KAAK,CAAC,gBAAD,CAAmB,CAC7CC,MAAM,CAAE,MADqC,CAC7B;AAChBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeL,IAAf,CAFuC,CAEjB;AAC5BM,OAAO,CAAE,CACP,eAAgB,kBADT,CAHoC,CAAnB,CAD9B,QACQC,QADR,qCASeA,CAAAA,QAAQ,CAACC,IAAT,EATf,6GAVkB,2CAsBlBT,QAAQ,CAACR,WAAD,CAAR,CACD,C,uCAEQ,CACP,mBACE,2BAAK,SAAS,CAAC,kBAAf,eAEE,6HAFF,cAIE,4BAAM,QAAQ,CAAE,KAAKN,YAArB,CAAmC,MAAM,CAAC,MAA1C,eACE,6BACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAE,KAAKF,iBAFjB,CAGE,IAAI,CAAC,YAHP,CAIE,WAAW,CAAC,kDAJd,EADF,cAQE,gCACE,EAAE,CAAC,eADL,CAEE,IAAI,CAAC,cAFP,CAGE,IAAI,CAAC,IAHP,CAIE,IAAI,CAAC,IAJP,CAKE,QAAQ,CAAE,KAAKA,iBALjB,CAME,WAAW,CAAC,4CANd,EARF,cAkBE,6BAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,wDAA3B,EAlBF,CAJF,CADF,CA2BD,C,uBAxEoCN,KAAK,CAACgC,S,EA2E7C;OA3EqB9B,S","sourcesContent":["import React from 'react';\r\nimport moment from 'moment'\r\n\r\nexport default class MainPosts extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { value: '' };\r\n\r\n    this.handleInputChange = this.handleInputChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleInputChange(event) {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    const sended_data = {\r\n      title: this.state.main_title,\r\n      content: this.state.main_content,\r\n      author: 'Максим',\r\n      date: moment().format(\"YYYY-MMMM-DDDD HH:mm:ss\")\r\n    };\r\n\r\n    async function postData(data = {}) {\r\n      const response = await fetch('/main_post/new', {\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(data), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      return await response.json();\r\n    }\r\n\r\n    postData(sended_data);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"main_post_create\">\r\n        {/* Добавление записей на главную страницу \"Главная\" */}\r\n        <h2>Записи на главной</h2>\r\n\r\n        <form onSubmit={this.handleSubmit} method=\"POST\">\r\n          <input\r\n            type=\"text\"\r\n            onChange={this.handleInputChange}\r\n            name=\"main_title\"\r\n            placeholder=\"Название\"\r\n          />\r\n\r\n          <textarea\r\n            id=\"froala-editor\"\r\n            name=\"main_content\"\r\n            cols=\"30\"\r\n            rows=\"10\"\r\n            onChange={this.handleInputChange}\r\n            placeholder=\"Контент\"></textarea>\r\n\r\n          \r\n\r\n          <input type=\"submit\" value=\"Отправить\" />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n//\r\n"]},"metadata":{},"sourceType":"module"}