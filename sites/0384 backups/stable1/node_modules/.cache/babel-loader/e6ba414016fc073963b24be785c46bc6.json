{"ast":null,"code":"import _classCallCheck from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/root/0384full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Collapse}from'react-bootstrap';import{Markup}from'interweave';import{Link}from'react-router-dom';var Subhomework=/*#__PURE__*/function(_React$Component){_inherits(Subhomework,_React$Component);var _super=_createSuper(Subhomework);function Subhomework(props){var _this;_classCallCheck(this,Subhomework);_this=_super.call(this,props);_this.subject_id=_this.props.subject_id;_this.state={open:false,hw:[],last:''};return _this;}_createClass(Subhomework,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var apiUrl=\"/api/subjecthomework/?id=\".concat(this.subject_id);axios.get(apiUrl).then(function(resp){if(resp.data.length>0){_this2.setState({hw:resp.data,last:resp.data[0].date});}});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"page-subdirect__hwBlock\"},this.state.hw.length>0&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this3.setState({open:!_this3.state.open});},\"aria-controls\":\"collapsed-block\",\"aria-expanded\":this.state.open},\"\\u0414\\u043E\\u043C\\u0430\\u0448\\u043D\\u0435\\u0435 \\u0437\\u0430\\u0434\\u0430\\u043D\\u0438\\u0435\",/*#__PURE__*/React.createElement(\"span\",null,\"\\u043F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0435\\u0435 \\u043E\\u0442 \",this.state.last)),/*#__PURE__*/React.createElement(Collapse,{in:this.state.open},/*#__PURE__*/React.createElement(\"div\",{id:\"collapsed-block\"},this.state.hw.map(function(res,index){return/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/view\",state:{res:res}},className:\"info-block\",key:index},/*#__PURE__*/React.createElement(\"span\",{className:\"info-block__title\"},res.title),/*#__PURE__*/React.createElement(\"span\",{className:\"info-block__content\"},/*#__PURE__*/React.createElement(Markup,{content:res.content.length>300?res.content.substring(0,300)+'...':res.content})),/*#__PURE__*/React.createElement(\"span\",{className:\"info-block__date\"},res.date));}))));}}]);return Subhomework;}(React.Component);export{Subhomework as default};","map":{"version":3,"sources":["/root/0384full/src/components/subhomework.js"],"names":["React","axios","Collapse","Markup","Link","Subhomework","props","subject_id","state","open","hw","last","apiUrl","get","then","resp","data","length","setState","date","map","res","index","pathname","title","content","substring","Component"],"mappings":"ogBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,iBAAzB,CACA,OAASC,MAAT,KAAuB,YAAvB,CACA,OAASC,IAAT,KAAqB,kBAArB,C,GAEqBC,CAAAA,W,sHACnB,qBAAYC,KAAZ,CAAmB,6CACjB,uBAAMA,KAAN,EACA,MAAKC,UAAL,CAAkB,MAAKD,KAAL,CAAWC,UAA7B,CAEA,MAAKC,KAAL,CAAa,CACXC,IAAI,CAAE,KADK,CAEXC,EAAE,CAAE,EAFO,CAGXC,IAAI,CAAE,EAHK,CAAb,CAJiB,aASlB,C,qFACmB,iBAClB,GAAMC,CAAAA,MAAM,oCAA+B,KAAKL,UAApC,CAAZ,CACAN,KAAK,CAACY,GAAN,CAAUD,MAAV,EAAkBE,IAAlB,CAAuB,SAACC,IAAD,CAAU,CAC/B,GAAIA,IAAI,CAACC,IAAL,CAAUC,MAAV,CAAmB,CAAvB,CAA0B,CACxB,MAAI,CAACC,QAAL,CAAc,CACZR,EAAE,CAAEK,IAAI,CAACC,IADG,CAEZL,IAAI,CAAEI,IAAI,CAACC,IAAL,CAAU,CAAV,EAAaG,IAFP,CAAd,EAID,CACF,CAPD,EAQD,C,uCAEQ,iBACP,mBACE,2BAAK,SAAS,CAAC,yBAAf,EACG,KAAKX,KAAL,CAAWE,EAAX,CAAcO,MAAd,CAAuB,CAAvB,eACC,8BACE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACC,QAAL,CAAc,CAAET,IAAI,CAAE,CAAC,MAAI,CAACD,KAAL,CAAWC,IAApB,CAAd,CAAN,EADX,CAEE,gBAAc,iBAFhB,CAGE,gBAAe,KAAKD,KAAL,CAAWC,IAH5B,6GAKE,uGAAoB,KAAKD,KAAL,CAAWG,IAA/B,CALF,CAFJ,cAUE,oBAAC,QAAD,EAAU,EAAE,CAAE,KAAKH,KAAL,CAAWC,IAAzB,eACE,2BAAK,EAAE,CAAC,iBAAR,EACG,KAAKD,KAAL,CAAWE,EAAX,CAAcU,GAAd,CAAkB,SAACC,GAAD,CAAMC,KAAN,qBACjB,oBAAC,IAAD,EACE,EAAE,CAAE,CACFC,QAAQ,QADN,CAEFf,KAAK,CAAE,CAAEa,GAAG,CAAHA,GAAF,CAFL,CADN,CAKE,SAAS,CAAC,YALZ,CAME,GAAG,CAAEC,KANP,eAOE,4BAAM,SAAS,CAAC,mBAAhB,EAAqCD,GAAG,CAACG,KAAzC,CAPF,cAQE,4BAAM,SAAS,CAAC,qBAAhB,eAEI,oBAAC,MAAD,EACE,OAAO,CACLH,GAAG,CAACI,OAAJ,CAAYR,MAAZ,CAAqB,GAArB,CACII,GAAG,CAACI,OAAJ,CAAYC,SAAZ,CAAsB,CAAtB,CAAyB,GAAzB,EAAgC,KADpC,CAEIL,GAAG,CAACI,OAJZ,EAFJ,CARF,cAmBE,4BAAM,SAAS,CAAC,kBAAhB,EAAoCJ,GAAG,CAACF,IAAxC,CAnBF,CADiB,EAAlB,CADH,CADF,CAVF,CADF,CAwCD,C,yBAhEsCnB,KAAK,CAAC2B,S,SAA1BtB,W","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Collapse } from 'react-bootstrap';\r\nimport { Markup } from 'interweave';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default class Subhomework extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.subject_id = this.props.subject_id;\r\n\r\n    this.state = {\r\n      open: false,\r\n      hw: [],\r\n      last: '',\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const apiUrl = `/api/subjecthomework/?id=${this.subject_id}`;\r\n    axios.get(apiUrl).then((resp) => {\r\n      if (resp.data.length > 0) {\r\n        this.setState({\r\n          hw: resp.data,\r\n          last: resp.data[0].date,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"page-subdirect__hwBlock\">\r\n        {this.state.hw.length > 0 && (\r\n          <button\r\n            onClick={() => this.setState({ open: !this.state.open })}\r\n            aria-controls=\"collapsed-block\"\r\n            aria-expanded={this.state.open}>\r\n            Домашнее задание\r\n            <span>последнее от {this.state.last}</span>\r\n          </button>\r\n        )}\r\n        <Collapse in={this.state.open}>\r\n          <div id=\"collapsed-block\">\r\n            {this.state.hw.map((res, index) => (\r\n              <Link\r\n                to={{\r\n                  pathname: `/view`,\r\n                  state: { res },\r\n                }}\r\n                className=\"info-block\"\r\n                key={index}>\r\n                <span className=\"info-block__title\">{res.title}</span>\r\n                <span className=\"info-block__content\">\r\n                  {\r\n                    <Markup\r\n                      content={\r\n                        res.content.length > 300\r\n                          ? res.content.substring(0, 300) + '...'\r\n                          : res.content\r\n                      }\r\n                    />\r\n                  }\r\n                </span>\r\n                <span className=\"info-block__date\">{res.date}</span>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        </Collapse>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}