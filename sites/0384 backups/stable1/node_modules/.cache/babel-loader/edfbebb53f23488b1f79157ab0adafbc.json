{"ast":null,"code":"var _jsxFileName = \"/root/0384full/src/pages/hw.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Markup } from 'interweave';\nimport { Link } from 'react-router-dom';\nimport moment from 'moment';\nimport 'moment/locale/ru';\nimport fire from \"../assets/img/fire.svg\";\nimport fileImg from \"../assets/img/file.svg\";\nexport default class HW extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hw: []\n    };\n  }\n\n  componentDidMount() {\n    const apiUrl = `/api/homework`;\n    axios.get(apiUrl).then(resp => {\n      if (resp.data.length > 0) {\n        this.setState({\n          hw: resp.data\n        });\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page page-homework\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 7\n      }\n    }, this.state.hw.map((res, index) => {\n      let deadline = '';\n      let wholeRopeWidth = '';\n      let progress = '';\n      let fromStartToNow = '';\n      let publicDate = moment(res.date);\n      let pubicDate_startPoint = moment(res.date);\n      let color = 'rgb(125 199 125)';\n      let leftTime = '';\n\n      if (res.deadline !== '0000-00-00') {\n        deadline = moment(res.deadline);\n        wholeRopeWidth = deadline.diff(publicDate, 'hours');\n        fromStartToNow = moment().diff(pubicDate_startPoint, 'hours');\n        progress = fromStartToNow / wholeRopeWidth * 100;\n        leftTime = wholeRopeWidth - fromStartToNow;\n\n        if (100 - progress <= 65) {\n          color = '#d8e061';\n        }\n\n        if (100 - progress <= 35) {\n          color = '#ff958a';\n        }\n      }\n\n      const regex = /\\b(?:(?:ht|f)tp(?:s?)\\:\\/\\/|~\\/|\\/)?(?:\\w+:\\w+@)?((?:(?:[-\\w\\d{1-3}]+\\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\\.uk|ac\\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2}))|((\\b25[0-5]\\b|\\b[2][0-4][0-9]\\b|\\b[0-1]?[0-9]?[0-9]\\b)(\\.(\\b25[0-5]\\b|\\b[2][0-4][0-9]\\b|\\b[0-1]?[0-9]?[0-9]\\b)){3}))(?::[\\d]{1,5})?(?:(?:(?:\\/(?:[-\\w~!$+|.,=]|%[a-f\\d]{2})+)+|\\/)+|\\?|#)?(?:(?:\\?(?:[-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?(?:[-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)(?:&(?:[-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?(?:[-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)*)*(?:#(?:[-\\w~!$ |\\/.,*:;=]|%[a-f\\d]{2})*)?\\b/gi;\n      const replacedContent = res.content.replace(regex, match => {\n        return `\n                    <img src=${fileImg} width='40' />\n                  `;\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }\n      }, deadline && moment().isBefore(deadline) && /*#__PURE__*/React.createElement(\"div\", {\n        title: `до сдачи осталось ${Math.floor(leftTime / 24)}д ${leftTime - 24 * Math.floor(leftTime / 24)}ч`,\n        style: {\n          marginTop: '25px',\n          width: progress ? 100 - progress + '%' : 0,\n          background: color,\n          height: '5px',\n          position: 'relative'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: fire,\n        width: \"25\",\n        style: {\n          opacity: 0.8,\n          position: 'absolute',\n          right: '-6px',\n          top: '-18px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(Link, {\n        to: {\n          pathname: `/view`,\n          state: {\n            res\n          }\n        },\n        className: \"info-block\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"info-block__title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }\n      }, res.title, \" \", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 31\n        }\n      }, \"| \", res.subjtitle)), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"info-block__content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Markup, {\n        content: replacedContent.length > 300 ? replacedContent.substring(0, 300) + '...' : replacedContent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"info-block__date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }\n      }, publicDate.locale('ru').format('lll')), deadline && moment().isBefore(deadline) && /*#__PURE__*/React.createElement(\"span\", {\n        className: \"info-block__date info-block__date_deadline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 19\n        }\n      }, \"\\u0441\\u0434\\u0430\\u0442\\u044C \\u0434\\u043E \", deadline.locale('ru').format('lll')), deadline && moment().isAfter(deadline) && /*#__PURE__*/React.createElement(\"span\", {\n        className: \"info-block__date info-block__date_deadline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 19\n        }\n      }, \"\\u0434\\u0435\\u0434\\u043B\\u0430\\u0439\\u043D \\u0431\\u044B\\u043B \", deadline.locale('ru').format('lll'))));\n    }));\n  }\n\n}","map":{"version":3,"sources":["/root/0384full/src/pages/hw.js"],"names":["React","axios","Markup","Link","moment","HW","Component","constructor","props","state","hw","componentDidMount","apiUrl","get","then","resp","data","length","setState","render","map","res","index","deadline","wholeRopeWidth","progress","fromStartToNow","publicDate","date","pubicDate_startPoint","color","leftTime","diff","regex","replacedContent","content","replace","match","fileImg","isBefore","Math","floor","marginTop","width","background","height","position","fire","opacity","right","top","pathname","title","subjtitle","substring","locale","format","isAfter"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Markup } from 'interweave';\r\nimport { Link } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport 'moment/locale/ru';\r\nimport fire from '../assets/img/fire.svg';\r\nimport fileImg from '../assets/img/file.svg';\r\n\r\nexport default class HW extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      hw: [],\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const apiUrl = `/api/homework`;\r\n    axios.get(apiUrl).then((resp) => {\r\n      if (resp.data.length > 0) {\r\n        this.setState({\r\n          hw: resp.data,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"page page-homework\">\r\n        {this.state.hw.map((res, index) => {\r\n          let deadline = '';\r\n          let wholeRopeWidth = '';\r\n          let progress = '';\r\n          let fromStartToNow = '';\r\n          let publicDate = moment(res.date);\r\n          let pubicDate_startPoint = moment(res.date);\r\n          let color = 'rgb(125 199 125)';\r\n          let leftTime = '';\r\n          if (res.deadline !== '0000-00-00') {\r\n            deadline = moment(res.deadline);\r\n            wholeRopeWidth = deadline.diff(publicDate, 'hours');\r\n            fromStartToNow = moment().diff(pubicDate_startPoint, 'hours');\r\n            progress = (fromStartToNow / wholeRopeWidth) * 100;\r\n            leftTime = wholeRopeWidth - fromStartToNow;\r\n            if (100 - progress <= 65) {\r\n              color = '#d8e061';\r\n            }\r\n            if (100 - progress <= 35) {\r\n              color = '#ff958a';\r\n            }\r\n          }\r\n\r\n          const regex = /\\b(?:(?:ht|f)tp(?:s?)\\:\\/\\/|~\\/|\\/)?(?:\\w+:\\w+@)?((?:(?:[-\\w\\d{1-3}]+\\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\\.uk|ac\\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2}))|((\\b25[0-5]\\b|\\b[2][0-4][0-9]\\b|\\b[0-1]?[0-9]?[0-9]\\b)(\\.(\\b25[0-5]\\b|\\b[2][0-4][0-9]\\b|\\b[0-1]?[0-9]?[0-9]\\b)){3}))(?::[\\d]{1,5})?(?:(?:(?:\\/(?:[-\\w~!$+|.,=]|%[a-f\\d]{2})+)+|\\/)+|\\?|#)?(?:(?:\\?(?:[-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?(?:[-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)(?:&(?:[-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?(?:[-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)*)*(?:#(?:[-\\w~!$ |\\/.,*:;=]|%[a-f\\d]{2})*)?\\b/gi;\r\n\r\n          const replacedContent = res.content.replace(regex, (match) => {\r\n            return `\r\n                    <img src=${fileImg} width='40' />\r\n                  `;\r\n          });\r\n\r\n          return (\r\n            <div key={index}>\r\n              {deadline && moment().isBefore(deadline) && (\r\n                <div\r\n                  title={`до сдачи осталось ${Math.floor(leftTime / 24)}д ${\r\n                    leftTime - 24 * Math.floor(leftTime / 24)\r\n                  }ч`}\r\n                  style={{\r\n                    marginTop: '25px',\r\n                    width: progress ? 100 - progress + '%' : 0,\r\n                    background: color,\r\n                    height: '5px',\r\n                    position: 'relative',\r\n                  }}>\r\n                  <img\r\n                    src={fire}\r\n                    width=\"25\"\r\n                    style={{\r\n                      opacity: 0.8,\r\n                      position: 'absolute',\r\n                      right: '-6px',\r\n                      top: '-18px',\r\n                    }}\r\n                  />\r\n                </div>\r\n              )}\r\n              <Link\r\n                to={{\r\n                  pathname: `/view`,\r\n                  state: { res },\r\n                }}\r\n                className=\"info-block\">\r\n                <span className=\"info-block__title\">\r\n                  {res.title} <span>| {res.subjtitle}</span>\r\n                </span>\r\n\r\n                <span className=\"info-block__content\">\r\n                  {\r\n                    <Markup\r\n                      content={\r\n                        replacedContent.length > 300\r\n                          ? replacedContent.substring(0, 300) + '...'\r\n                          : replacedContent\r\n                      }\r\n                    />\r\n                  }\r\n                </span>\r\n                <span className=\"info-block__date\">{publicDate.locale('ru').format('lll')}</span>\r\n                {deadline && moment().isBefore(deadline) && (\r\n                  <span className=\"info-block__date info-block__date_deadline\">\r\n                    сдать до {deadline.locale('ru').format('lll')}\r\n                  </span>\r\n                )}\r\n                {deadline && moment().isAfter(deadline) && (\r\n                  <span className=\"info-block__date info-block__date_deadline\">\r\n                    дедлайн был {deadline.locale('ru').format('lll')}\r\n                  </span>\r\n                )}\r\n              </Link>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}